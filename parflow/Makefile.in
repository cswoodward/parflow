##
## File:	Makefile.in
## Package:	Parflow
## Copyright:	(c) 1997-2008 Lawrence Livermore National Security, LLC
## Revision:	$LastChangedRevision: 2219 $
## Modified:	$LastChangedDate: 2008-06-12 13:14:48 -0700 (Thu, 12 Jun 2008) $
## Description:	makefile for the entire SAMRAI distribution
##

default: parflowexe

include ./config/Makefile.config

PARFLOW	      =	@top_srcdir@

SUBDIR        = .
SRCDIR        = @srcdir@
OBJECT        = .

SUBDIRS = amps parflow_lib parflow

parflowexe:
	( cd amps && $(MAKE) amps) || exit 1
	( cd parflow_lib && $(MAKE) parflowlib) || exit 1
	( cd parflow && $(MAKE) ) || exit 1

veryclean:

clean:
	@for DIR in $(SUBDIRS); do if test -d $$DIR; then (cd $$DIR && $(MAKE) $@) ; fi || exit 1; done
	@$(PARFLOW_CLEAN)

install:
	$(INSTALL) -d -m 755 $(PARFLOW_INSTALL_DIR)/lib
	$(INSTALL) -d -m 755 $(PARFLOW_INSTALL_DIR)/bin
	for i in lib/*; do				        \
	   $(INSTALL) -c -m 644 $$i $(PARFLOW_INSTALL_DIR)/lib; \
	done
	for i in bin/*; do				        \
	   $(INSTALL) -c -m 755 $$i $(PARFLOW_INSTALL_DIR)/bin; \
	done
	for i in batchmc bootmc freemc getmc killmc peekmc run; do           \
	   $(INSTALL) -c -m 755 $(PARFLOW)/amps/$(AMPS)/$$i $(PARFLOW_INSTALL_DIR)/bin; \
	done			


